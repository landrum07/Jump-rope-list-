<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
<meta name="apple-mobile-web-app-title" content="Tricktionary"/>
<title>Jump Rope Checklist</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display:ital@0;1&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet"/>
<style>
  *{box-sizing:border-box;margin:0;padding:0;}
  html,body{background:#0f0f13;min-height:100vh;color:#f0ede8;font-family:'DM Serif Display',Georgia,serif;-webkit-font-smoothing:antialiased;}

  #app{max-width:480px;margin:0 auto;padding-bottom:80px;}

  .header{padding:env(safe-area-inset-top,32px) 16px 20px;padding-top:max(env(safe-area-inset-top),32px);border-bottom:1px solid rgba(255,255,255,0.07);}
  .eyebrow{font-family:'DM Mono',monospace;font-size:10px;letter-spacing:0.16em;text-transform:uppercase;color:rgba(255,255,255,0.35);margin-bottom:6px;}
  h1{font-size:32px;font-style:italic;letter-spacing:-0.02em;line-height:1.1;margin-bottom:18px;}

  .stats{display:flex;gap:8px;margin-bottom:14px;}
  .stat-box{background:rgba(255,255,255,0.04);border-radius:10px;padding:10px 14px;text-align:center;flex:1;}
  .stat-num{font-size:22px;font-style:italic;}
  .stat-lbl{font-family:'DM Mono',monospace;font-size:10px;color:rgba(255,255,255,0.4);letter-spacing:0.08em;margin-top:2px;}

  .prog-track{height:3px;background:rgba(255,255,255,0.07);border-radius:2px;overflow:hidden;}
  .prog-fill{height:100%;border-radius:2px;background:linear-gradient(90deg,#9333ea,#60a5fa,#4ade80);transition:width 0.4s ease;}

  .legend{display:flex;gap:8px;flex-wrap:wrap;padding:12px 16px 10px;align-items:center;}
  .legend-item{display:flex;align-items:center;gap:5px;font-family:'DM Mono',monospace;font-size:10px;color:rgba(255,255,255,0.45);}
  .legend-dot{width:8px;height:8px;border-radius:50%;flex-shrink:0;}
  .legend-hint{font-family:'DM Mono',monospace;font-size:10px;color:rgba(255,255,255,0.22);margin-left:auto;}

  .filter-row{display:flex;gap:7px;padding:8px 16px;overflow-x:auto;-webkit-overflow-scrolling:touch;scrollbar-width:none;}
  .filter-row::-webkit-scrollbar{display:none;}
  .filter-row.top{padding-top:14px;}

  .fbtn{padding:6px 14px;border-radius:20px;border:1.5px solid rgba(255,255,255,0.15);background:transparent;color:rgba(255,255,255,0.55);font-family:'DM Mono',monospace;font-size:11px;cursor:pointer;white-space:nowrap;flex-shrink:0;-webkit-tap-highlight-color:transparent;transition:all 0.15s;}
  .fbtn.active{background:#f0ede8;color:#0f0f13;border-color:#f0ede8;}
  .fbtn.reset{border-color:rgba(255,80,80,0.25);color:rgba(255,100,100,0.55);}

  .sfbtn{padding:5px 12px;border-radius:20px;border:1.5px solid rgba(255,255,255,0.12);background:transparent;color:rgba(255,255,255,0.45);font-family:'DM Mono',monospace;font-size:10px;cursor:pointer;white-space:nowrap;flex-shrink:0;-webkit-tap-highlight-color:transparent;transition:all 0.15s;}

  .level-header{padding:26px 16px 10px;border-top:1px solid rgba(255,255,255,0.07);}
  .level-header:first-child{border-top:none;}
  .level-top{display:flex;align-items:baseline;justify-content:space-between;}
  .level-title{font-size:21px;font-style:italic;letter-spacing:-0.01em;}
  .level-count{font-family:'DM Mono',monospace;font-size:11px;color:rgba(255,255,255,0.3);}
  .level-desc{font-family:'DM Mono',monospace;font-size:11px;color:rgba(255,255,255,0.38);margin-top:3px;}

  .cat-header{font-family:'DM Mono',monospace;font-size:10px;letter-spacing:0.12em;text-transform:uppercase;color:rgba(255,255,255,0.28);padding:14px 16px 5px;}

  .trick-row{display:flex;align-items:center;gap:8px;padding:10px 16px;border-bottom:1px solid rgba(255,255,255,0.05);}
  .trick-row.pop{animation:rowpop 0.35s ease;}
  @keyframes rowpop{0%{transform:scale(1);}40%{transform:scale(1.015);background:rgba(255,255,255,0.04);}100%{transform:scale(1);}}

  .trick-name{font-family:'DM Mono',monospace;font-size:13px;letter-spacing:0.01em;flex:1;line-height:1.3;}
  .trick-name.mastered{opacity:0.4;}

  .pill{display:inline-flex;align-items:center;justify-content:center;border-radius:20px;border:1.5px solid;font-family:'DM Mono',monospace;font-size:11px;padding:4px 10px;cursor:pointer;white-space:nowrap;flex-shrink:0;min-width:95px;letter-spacing:0.02em;-webkit-tap-highlight-color:transparent;transition:all 0.18s;}
  .pill:active{opacity:0.7;}

  /* Video link button */
  .vid-btn{display:inline-flex;align-items:center;justify-content:center;width:30px;height:30px;border-radius:50%;border:1.5px solid rgba(255,255,255,0.12);background:transparent;color:rgba(255,255,255,0.35);text-decoration:none;font-size:13px;flex-shrink:0;transition:all 0.15s;-webkit-tap-highlight-color:transparent;}
  .vid-btn:hover,.vid-btn:active{border-color:rgba(255,255,255,0.35);color:rgba(255,255,255,0.7);}

  .empty{text-align:center;padding:48px 20px;font-family:'DM Mono',monospace;font-size:13px;color:rgba(255,255,255,0.3);}
</style>
</head>
<body>
<div id="app"></div>

<script>
const TRICKS = [
  {id:"180b",  name:"180 Backward",              level:1, cat:"basic",        slug:"180-backward"},
  {id:"180f",  name:"180 Forward",               level:1, cat:"basic",        slug:"180-forward"},
  {id:"360",   name:"360",                        level:1, cat:"basic",        slug:"360"},
  {id:"360tx", name:"360 Texas Style",            level:1, cat:"basic",        slug:"360-texas-style"},
  {id:"bj",    name:"Backwards Jump",             level:1, cat:"basic",        slug:"backwards-jump"},
  {id:"bss",   name:"Backwards Side Swing",       level:1, cat:"basic",        slug:"backwards-side-swing"},
  {id:"bsso",  name:"Backwards Side Swing Open",  level:1, cat:"basic",        slug:"backwards-side-swing-open"},
  {id:"bell",  name:"Bell",                       level:1, cat:"basic",        slug:"bell"},
  {id:"cancan",name:"Can Can",                    level:1, cat:"basic",        slug:"can-can"},
  {id:"crissx",name:"Criss Cross",                level:1, cat:"basic",        slug:"criss-cross"},
  {id:"db",    name:"Double Bounce",              level:1, cat:"basic",        slug:"double-bounce"},
  {id:"dss",   name:"Double Side Swing",          level:1, cat:"basic",        slug:"double-side-swing"},
  {id:"fstr",  name:"Forward Straddle",           level:1, cat:"basic",        slug:"forward-straddle"},
  {id:"fturn", name:"Full Turn",                  level:1, cat:"basic",        slug:"full-turn"},
  {id:"h2h",   name:"Heel-to-Heel",               level:1, cat:"basic",        slug:"heel-to-heel"},
  {id:"h2t",   name:"Heel-to-Toe",                level:1, cat:"basic",        slug:"heel-to-toe"},
  {id:"jog",   name:"Jogging Step",               level:1, cat:"basic",        slug:"jogging-step"},
  {id:"kneex", name:"Knee Crossover",             level:1, cat:"basic",        slug:"knee-crossover"},
  {id:"ss",    name:"Side Swing",                 level:1, cat:"basic",        slug:"side-swing"},
  {id:"ssx",   name:"Side Swing Cross",           level:1, cat:"basic",        slug:"side-swing-cross"},
  {id:"ssj",   name:"Side Swing Jump",            level:1, cat:"basic",        slug:"side-swing-jump"},
  {id:"sb",    name:"Single Bounce",              level:1, cat:"basic",        slug:"single-bounce"},
  {id:"skier", name:"Skier",                      level:1, cat:"basic",        slug:"skier"},
  {id:"str",   name:"Straddle Jump",              level:1, cat:"basic",        slug:"straddle-jump"},
  {id:"swkick",name:"Swing Kick",                 level:1, cat:"basic",        slug:"swing-kick"},
  {id:"t2t",   name:"Toe-to-Toe",                 level:1, cat:"basic",        slug:"toe-to-toe"},
  {id:"twist", name:"Twister",                    level:1, cat:"basic",        slug:"twister"},
  {id:"wduck", name:"Wounded Duck",               level:1, cat:"basic",        slug:"wounded-duck"},
  {id:"xmot",  name:"X-Motion",                   level:1, cat:"basic",        slug:"x-motion"},
  {id:"frog",  name:"Frog Fake",                  level:2, cat:"power",        slug:"frog-fake"},
  {id:"push",  name:"Pushup Fake",                level:2, cat:"power",        slug:"pushup-fake"},
  {id:"rump",  name:"Rump Jump",                  level:2, cat:"power",        slug:"rump-jump"},
  {id:"ohr",   name:"One Handle Release",         level:2, cat:"release",      slug:"one-handle-release"},
  {id:"as",    name:"AS",                         level:2, cat:"manipulation", slug:"as"},
  {id:"annie", name:"Awesome Annie",              level:2, cat:"manipulation", slug:"awesome-annie"},
  {id:"bx",    name:"Backwards Cross",            level:2, cat:"manipulation", slug:"backwards-cross"},
  {id:"bssx",  name:"Backwards Side Swing Cross", level:2, cat:"manipulation", slug:"backwards-side-swing-cross"},
  {id:"cl",    name:"CL",                         level:2, cat:"manipulation", slug:"cl"},
  {id:"croog", name:"Crooger/Leg Over",           level:2, cat:"manipulation", slug:"crooger"},
  {id:"eb",    name:"EB",                         level:2, cat:"manipulation", slug:"eb"},
  {id:"legw",  name:"Leg Wrap",                   level:2, cat:"manipulation", slug:"leg-wrap"},
  {id:"swx",   name:"Switch Cross",               level:2, cat:"manipulation", slug:"switch-cross"},
  {id:"toad",  name:"Toad/Leg Over Cross",        level:2, cat:"manipulation", slug:"toad"},
  {id:"ts",    name:"TS",                         level:2, cat:"manipulation", slug:"ts"},
  {id:"du",    name:"Double Under",               level:3, cat:"multiple",     slug:"double-under"},
  {id:"duxo",  name:"Double Under Cross Open",    level:3, cat:"multiple",     slug:"double-under-cross-open"},
  {id:"duox",  name:"Double Under Open Cross",    level:3, cat:"multiple",     slug:"double-under-open-cross"},
];

const LEVELS = {
  1:{label:"Level 1 â€” Basic",        emoji:"ðŸŸ¢", desc:"Foundation moves"},
  2:{label:"Level 2 â€” Intermediate", emoji:"ðŸŸ¡", desc:"Power, releases & manipulation"},
  3:{label:"Level 3 â€” Advanced",     emoji:"ðŸ”´", desc:"Multiples"},
};

const CAT_LABELS = {basic:"Basic",power:"Power",release:"Release",manipulation:"Manipulation",multiple:"Multiple"};

const STAGES = [
  {value:0, label:"Unstarted",   bg:"transparent", text:"rgba(255,255,255,0.25)", border:"rgba(255,255,255,0.15)"},
  {value:1, label:"Started",     bg:"#1e3a5f",     text:"#60a5fa",               border:"#2563eb"},
  {value:2, label:"In Progress", bg:"#3b2a00",     text:"#fbbf24",               border:"#d97706"},
  {value:3, label:"Comfortable", bg:"#1a3a2a",     text:"#4ade80",               border:"#16a34a"},
  {value:4, label:"Mastered",    bg:"#2d1a4a",     text:"#c084fc",               border:"#9333ea"},
];

let progress = {};
let levelFilter = "all";
let stageFilter = "all";

function load(){
  try { const d=localStorage.getItem("jr-progress"); if(d) progress=JSON.parse(d); } catch{}
}
function save(){ try{localStorage.setItem("jr-progress",JSON.stringify(progress));}catch{} }

function stats(){
  const total=TRICKS.length;
  const started=TRICKS.filter(t=>(progress[t.id]||0)>=1).length;
  const mastered=TRICKS.filter(t=>(progress[t.id]||0)===4).length;
  const score=TRICKS.reduce((s,t)=>s+(progress[t.id]||0),0);
  const pct=Math.round((score/(total*4))*100);
  return{total,started,mastered,pct};
}

function advance(id){
  const cur=progress[id]||0;
  progress[id]=cur<4?cur+1:0;
  save();
  const row=document.getElementById("row-"+id);
  if(row){row.classList.remove("pop");void row.offsetWidth;row.classList.add("pop");}
  updatePill(id);
  updateHeader();
}

function updatePill(id){
  const btn=document.getElementById("pill-"+id);
  if(!btn)return;
  const s=STAGES[progress[id]||0];
  btn.textContent=s.label;
  btn.style.background=s.bg;
  btn.style.color=s.text;
  btn.style.borderColor=s.border;
  const nameEl=document.getElementById("name-"+id);
  if(nameEl) nameEl.className="trick-name"+((progress[id]||0)===4?" mastered":"");
}

function updateHeader(){
  const {started,mastered,pct}=stats();
  const el=(id)=>document.getElementById(id);
  if(el("stat-started")) el("stat-started").textContent=started;
  if(el("stat-mastered")) el("stat-mastered").textContent=mastered;
  if(el("stat-pct")) el("stat-pct").textContent=pct+"%";
  if(el("prog-fill")) el("prog-fill").style.width=pct+"%";
  [1,2,3].forEach(lv=>{
    const lvTricks=TRICKS.filter(t=>t.level===lv);
    const lvMastered=lvTricks.filter(t=>(progress[t.id]||0)===4).length;
    const el2=document.getElementById("lv-count-"+lv);
    if(el2) el2.textContent=lvMastered+"/"+lvTricks.length+" mastered";
  });
}

function setLevelFilter(v){levelFilter=v;render();}
function setStageFilter(v){stageFilter=stageFilter===v?"all":v;render();}
function resetAll(){
  if(!confirm("Reset all progress?"))return;
  progress={};
  save();
  render();
}

function trickUrl(slug){
  return "https://the-tricktionary.com/trick/"+slug;
}

function render(){
  const {started,mastered,pct}=stats();

  const filtered=TRICKS
    .filter(t=>levelFilter==="all"||t.level===Number(levelFilter))
    .filter(t=>stageFilter==="all"||(progress[t.id]||0)===Number(stageFilter));

  const grouped={};
  for(const t of filtered){
    if(!grouped[t.level])grouped[t.level]={};
    if(!grouped[t.level][t.cat])grouped[t.level][t.cat]=[];
    grouped[t.level][t.cat].push(t);
  }

  const lvBtns=["all","1","2","3"].map(f=>
    `<button class="fbtn${levelFilter===f?" active":""}" onclick="setLevelFilter('${f}')">${f==="all"?"All Levels":"Lvl "+f}</button>`
  ).join("");

  const sBtns=STAGES.map(s=>{
    const active=stageFilter===String(s.value);
    const style=active?`background:${s.bg};color:${s.text};border-color:${s.border}`:"";
    return `<button class="sfbtn" style="${style}" onclick="setStageFilter('${s.value}')">${s.label}</button>`;
  }).join("");

  let listHTML="";
  const levelKeys=Object.keys(grouped).sort();
  if(levelKeys.length===0) listHTML=`<div class="empty">No tricks match this filter.</div>`;

  for(const lv of levelKeys){
    const info=LEVELS[lv];
    const lvTricks=TRICKS.filter(t=>t.level===Number(lv));
    const lvMastered=lvTricks.filter(t=>(progress[t.id]||0)===4).length;
    listHTML+=`
      <div class="level-header">
        <div class="level-top">
          <div class="level-title">${info.emoji} ${info.label}</div>
          <div class="level-count" id="lv-count-${lv}">${lvMastered}/${lvTricks.length} mastered</div>
        </div>
        <div class="level-desc">${info.desc}</div>
      </div>`;

    const cats=grouped[lv];
    for(const [cat,tricks] of Object.entries(cats)){
      if(cat!=="basic") listHTML+=`<div class="cat-header">â€” ${CAT_LABELS[cat]}</div>`;
      for(const t of tricks){
        const stage=progress[t.id]||0;
        const s=STAGES[stage];
        listHTML+=`
          <div class="trick-row" id="row-${t.id}">
            <span class="trick-name${stage===4?" mastered":""}" id="name-${t.id}">${t.name}</span>
            <a class="vid-btn" href="${trickUrl(t.slug)}" target="_blank" title="Watch tutorial">ðŸŽ¥</a>
            <button class="pill" id="pill-${t.id}"
              style="background:${s.bg};color:${s.text};border-color:${s.border}"
              onclick="advance('${t.id}')">${s.label}</button>
          </div>`;
      }
    }
  }

  document.getElementById("app").innerHTML=`
    <div class="header">
      <div class="eyebrow">the tricktionary</div>
      <h1>Jump Rope<br/>Checklist</h1>
      <div class="stats">
        <div class="stat-box">
          <div class="stat-num" style="color:#60a5fa" id="stat-started">${started}</div>
          <div class="stat-lbl">STARTED</div>
        </div>
        <div class="stat-box">
          <div class="stat-num" style="color:#c084fc" id="stat-mastered">${mastered}</div>
          <div class="stat-lbl">MASTERED</div>
        </div>
        <div class="stat-box">
          <div class="stat-num" style="color:#4ade80" id="stat-pct">${pct}%</div>
          <div class="stat-lbl">OVERALL</div>
        </div>
      </div>
      <div class="prog-track"><div class="prog-fill" id="prog-fill" style="width:${pct}%"></div></div>
    </div>

    <div class="legend">
      ${STAGES.slice(1).map(s=>`<div class="legend-item"><div class="legend-dot" style="background:${s.border}"></div>${s.label}</div>`).join("")}
      <span class="legend-hint">ðŸŽ¥ = tutorial</span>
    </div>

    <div class="filter-row top">
      ${lvBtns}
      <button class="fbtn reset" onclick="resetAll()">Reset</button>
    </div>
    <div class="filter-row">
      ${sBtns}
    </div>

    ${listHTML}
  `;
}

load();
render();
</script>
</body>
</html>
